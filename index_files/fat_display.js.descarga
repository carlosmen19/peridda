void 0===SK.Util&&(SK.Util={}),SK.Util.isClient=function(){return SK.Singletons&&SK.Singletons.env&&SK.Singletons.env.get("client")},SK.Util.isES6Class=function(t){return"function"==typeof t&&/^class\s?/.test(Function.prototype.toString.call(t))},SK.Util.getType=function(t){switch(!0){case null===t:return"null";case NaN===t:return"NaN";case t instanceof Date:return"date";case SK.Util.isClient()&&t instanceof HTMLElement:return"element";case Array.isArray(t):return"array";default:return typeof t}},SK.Util.deepAssign=function(t,e){var i=SK.Util.getType(t);if("object"==i||"array"==i)for(var a="array"==i,n=1,s=arguments.length;n<s;n++){var o=arguments[n];if(null!=o&&i==SK.Util.getType(o))for(var p=Object.keys(o),l=0,c=p.length;l<c;l++){var r=p[l],S=SK.Util.getType(o[r]),u=r;a&&-1==t.indexOf(t[r])&&(u=t.length),"object"==S||"array"==S?(t[u]=t[u]||("object"==S?{}:[]),SK.Util.deepAssign(t[u],o[r])):t[u]=o[r]}}return t},SK.Util.compare=function(t,e){if(t===e)return!0;var i=SK.Util.getType(t),a=SK.Util.getType(e);if(i==a)switch(i){case"NaN":case"null":case"string":case"number":case"boolean":case"element":case"undefined":return!1;case"date":return t.getTime()==e.getTime();case"array":return t.length!=e.length?!1:t.every(function(t,e,i){return SK.Util.compare(i[e],this[e])},e);default:var n,s=t,o=e,p=SK.Util.compare(Object.keys(s).sort(),Object.keys(o).sort());for(n in s){if(!p)return!1;p=s.hasOwnProperty(n)&&o.hasOwnProperty(n)&&SK.Util.compare(s[n],o[n])}return p}return!1},SK.Util.extractStockImageURL=function(t,e){return t.sizes[e=e||"original"]+"#STOCKIMGID"+t.collection_id+"___"+t.id+"___"+e},SK.Util.typeOf=function(t){return{}.toString.apply(t).match(/\s(\w+)/)[1].toLowerCase()},function(){function t(t){var a=t.SK||{};return a.Applications=a.Applications||{},a.Applications.Settings=function(t){this.options=t},a.Applications.Settings.prototype={constructor:a.Applications.Settings,set:function(t,e,i){new a.API(this.options.session_id).execute("app.user.set_settings",{user_id:this.options.user_id,app_id:this.options.app_id,settings:JSON.stringify(t)},function(t,e,i){t?this.callback_ok(i):this.callback_failure(e)}.bind({callback_ok:e,callback_failure:i}))},get:function(t,e){new a.API(this.options.session_id).execute("app.user.get_settings",{user_id:this.options.user_id,app_id:this.options.app_id},function(t,e,i){t?this.callback_ok(i):this.callback_failure(e)}.bind({callback_ok:t,callback_failure:e}))}},a}"undefined"!=typeof module?module.exports=t:this.SK=t(this)}(),SK.React=SK.React||{},SK.React.Component=SK.React.Component||{},SK.React.Component.Application=SK.React.Component.Application||{},(()=>{var t;SK.Singletons.env.get("is_app_settings")&&(t=((((("undefined"==typeof parent?{}:parent).SK||{}).React||{}).Component||{}).Application||{}).GlobalData),SK.React.Component.Application.GlobalData=SK.React.Component.Application.GlobalData||t||{data:{},callbacks:[],is_admin:SK.Singletons.env.get("admin_mode"),update_interval:null,timeout:2e3,initAppData(t,e,i){this.data[t]=this.data[t]||{options:i||{},properties:e}},getAppData(t){return(this.data[t]||{}).options},setAppData(t,e,i,a){var n,s={};for(n in e)e.hasOwnProperty(n)&&0!==n.indexOf("__")&&(s[n]=e[n]);if(this.data[t].options=s,Object.keys(s).length){for(var o in this.callbacks)this.callbacks.hasOwnProperty(o)&&(this.callbacks[o]||function(){})(t,s);i&&(clearTimeout(this.update_interval),this.update_interval=setTimeout(this.saveSettings.bind(this,t,s,a),this.timeout))}},saveSettings(t,e,i){this.is_admin&&(this.data[t].app_settings=this.data[t].app_settings||new SK.Applications.Settings(this.data[t].properties),this.data[t].app_settings.set(e,i||function(){},void 0))},addChangeListener(t){this.callbacks.push(t)},removeChangeListener(t){this.callbacks.splice(this.callbacks.indexOf(t),1)}}})(),SK.React=SK.React||{},SK.React.Component=SK.React.Component||{},SK.React.Component.Application=SK.React.Component.Application||{},SK.React.Component.Application.Settings=SK.React.Component.Application.Settings||class extends React.Component{is_properties_save_allowed=!0;constructor(t){super(t),this.state=t.settings||{},SK.React.Component.Application.GlobalData.initAppData(this.props.app_id,t,t.settings),this.updateSettings=this.updateSettings.bind(this),SK.React.Component.Application.GlobalData.addChangeListener(this.updateSettings)}updateSettings(){super.setState(SK.React.Component.Application.GlobalData.getAppData(this.props.app_id))}setState(t,e){e=e||function(){};let i=this.state;super.setState(t,(...t)=>{SK.Util.compare(this.state,i)||SK.React.Component.Application.GlobalData.setAppData(this.props.app_id,this.state,SK.Singletons.env.get("is_app_settings")&&this.isPropertiesSaveAllowed()),e(...t)})}isPropertiesSaveAllowed(){return this.is_properties_save_allowed}allowPropertiesSave(t){this.is_properties_save_allowed=t}shouldComponentUpdate(t,e){return!0}render(){return React.createElement("div",null)}componentDidUpdate(t,e){}componentDidMount(){}componentWillUnmount(){}},SK.React.Component.Application=SK.React.Component.Application||{},SK.React.Component.Application.Display=class extends SK.React.Component.Display{constructor(t){super(t),this.state.__settings=SK.React.Component.Application.GlobalData.getAppData(this.props.app_id)||t.settings||{},SK.React.Component.Application.GlobalData.initAppData(this.props.app_id,t,t.settings),this.updateSettings=this.updateSettings.bind(this),SK.React.Component.Application.GlobalData.addChangeListener(this.updateSettings)}updateSettings(t){t==this.props.app_id&&(this.getBaseSetState?this.getBaseSetState():this.setState.bind(this))({__settings:SK.React.Component.Application.GlobalData.getAppData(this.props.app_id)})}updateStateValues(t,e){return e.__settings&&(e.__settings=SK.Util.deepAssign({},t.__settings,e.__settings)),e}executeObjectSet(t,e){super.executeObjectSet(t,e),e.__settings&&SK.React.Component.Application.GlobalData.setAppData(this.props.app_id,t.__settings,this.edit_mode&&this.isPropertiesSaveAllowed())}},SK.React.Component.Application=SK.React.Component.Application||{},SK.React.Component.Application.Header=SK.React.Component.Application.Footer=class extends SK.React.Component.Application.Settings{};